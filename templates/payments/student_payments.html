{# templates/payments/student_payments.html #}
{% extends "base.html" %}
{% load static %}
{% block title %}My Payments{% endblock %}
{% include "partials/header.html" %}
{% block content %}
<link rel="stylesheet" href="{% static 'payments/css/payments.css' %}">

<div class="container mt-4">
  <h3>My Payments</h3>
  <div class="card">
    <div class="card-body">
      {% if payments %}
      <table class="table">
        <thead>
          <tr>
            <th>#</th><th>Course</th><th>Amount</th><th>Status</th><th>Date</th><th>Invoice</th>
          </tr>
        </thead>
        <tbody>
          {% for p in payments %}
          <tr>
            <td>{{ p.id }}</td>
            <td>{{ p.course.title }}</td>
            <td>${{ p.amount }}</td>
            <td>
              {% if p.status == "Completed" %}
                <span class="badge bg-success">Completed</span>
              {% elif p.status == "Pending" %}
                <span class="badge bg-warning text-dark">Pending</span>
              {% else %}
                <span class="badge bg-secondary">{{ p.status }}</span>
              {% endif %}
            </td>
            <td>{{ p.created_at|date:"d M, Y" }}</td>
            <td><a class="btn btn-sm btn-outline-primary" href="{% url 'payments:payment_invoice' p.id %}" target="_blank">Invoice</a></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p class="text-muted">You haven't made any payments yet.</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
