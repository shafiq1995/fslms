{% extends "base.html" %}
{% load static %}
{% block title %}{{ instructor.get_full_name|default:instructor.username }}{% endblock %}

{% block content %}
<div class="container mt-5 mb-5">
  <div class="row g-4">
    <div class="col-md-4 text-center">
      {% if instructor.avatar %}
        <img src="{{ instructor.avatar.url }}" class="rounded-circle" width="180" height="180" style="object-fit:cover;">
      {% elif instructor.profile and instructor.profile.profile_picture %}
        <img src="{{ instructor.profile.profile_picture.url }}" class="rounded-circle" width="180" height="180" style="object-fit:cover;">
      {% else %}
        <img src="{% static 'images/default instructor image.jpg' %}" class="rounded-circle" width="180" height="180" style="object-fit:cover;">
      {% endif %}
      <h3 class="mt-3">{{ instructor.get_full_name|default:instructor.username }}</h3>
      <p class="text-muted">
        {% if instructor.instructorprofile %}
          {{ instructor.instructorprofile.professional_title|default:"Instructor" }}
        {% else %}
          {{ instructor.professional_title|default:"Instructor" }}
        {% endif %}
      </p>
      <p class="small text-muted">Joined: {{ instructor.date_joined|date:"M d, Y" }}</p>

      <div class="mt-3">
        {% if instructor.instructorprofile and instructor.instructorprofile.linkedin %}<a href="{{ instructor.instructorprofile.linkedin }}" target="_blank" class="me-2"><i class="bi bi-linkedin fs-4"></i></a>{% endif %}
        {% if instructor.instructorprofile and instructor.instructorprofile.twitter %}<a href="{{ instructor.instructorprofile.twitter }}" target="_blank" class="me-2"><i class="bi bi-twitter fs-4"></i></a>{% endif %}
        {% if instructor.instructorprofile and instructor.instructorprofile.website %}<a href="{{ instructor.instructorprofile.website }}" target="_blank"><i class="bi bi-globe fs-4"></i></a>{% endif %}
      </div>
    </div>

    <div class="col-md-8">
      <div class="card shadow-sm border-0 mb-3">
        <div class="card-body">
          <h5 class="fw-bold mb-3">About</h5>
          <p class="text-muted">{{ instructor.profile.bio|default:"No bio available." }}</p>

          <div class="row">
            <div class="col-md-6">
              <p><strong>Education:</strong> {{ instructor.instructorprofile.education|default:"N/A" }}</p>
              <p><strong>Expertise:</strong> {{ instructor.instructorprofile.expertise_area|default:"N/A" }}</p>
              <p><strong>Skills:</strong> {{ instructor.instructorprofile.skills|default:"N/A" }}</p>
            </div>
            <div class="col-md-6">
              <p><strong>Languages:</strong> {{ instructor.instructorprofile.languages|default:"N/A" }}</p>
              <p><strong>Experience:</strong> {{ instructor.instructorprofile.experience_years|default:"0" }} years</p>
              <p><strong>Rating:</strong> {{ instructor.instructorprofile.rating|default:"0.0" }}</p>
            </div>
          </div>
        </div>
      </div>

      <div class="card shadow-sm border-0">
        <div class="card-header bg-light">
          <h6 class="fw-bold mb-0"><i class="bi bi-collection-play"></i> Courses by {{ instructor.get_full_name|default:instructor.username }}</h6>
        </div>
        <div class="card-body">
          {% if courses %}
            <div class="list-group">
              {% for c in courses %}
              <a href="{% url 'courses:course_detail' c.id %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                <span>{{ c.title }}</span>
                <span class="badge bg-secondary">{{ c.get_status_display|default:c.status }}</span>
              </a>
              {% endfor %}
            </div>
          {% else %}
            <p class="text-muted mb-0">No courses found for this instructor.</p>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
